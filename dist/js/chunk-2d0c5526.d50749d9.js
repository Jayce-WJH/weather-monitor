(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5526"],{"3f30":function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"ces-main"},[l("el-tag",[e._v("告警列表")]),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,model:e.form,border:""}},[l("el-table-column",{attrs:{property:"id",label:"序号"}}),l("el-table-column",{attrs:{property:"time",label:"报警时间"}}),l("el-table-column",{attrs:{property:"place",label:"报警地点"}}),l("el-table-column",{attrs:{property:"device_id",label:"设备编号"}}),l("el-table-column",{attrs:{property:"area_id",label:"区域编号"}}),l("el-table-column",{attrs:{property:"type",label:"报警类型"}}),l("el-table-column",{attrs:{property:"data",label:"报警值"}}),l("el-table-column",{attrs:{property:"status",label:"处理状态(0:未处理 1:已处理)"}}),l("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.handleCheck(t.row)}}},[e._v("查看")]),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.Delete(t.row)}}},[e._v("解除报警")])]}}])})],1),l("el-dialog",{attrs:{title:"告警信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{"label-position":"left",model:e.form2}},[l("el-form-item",{attrs:{label:"处理人姓名","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.name,callback:function(t){e.$set(e.form2,"name",t)},expression:"form2.name"}})],1),l("el-form-item",{attrs:{label:"联系方式","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.telephone,callback:function(t){e.$set(e.form2,"telephone",t)},expression:"form2.telephone"}})],1),l("el-form-item",{attrs:{label:"处理时间","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.time,callback:function(t){e.$set(e.form2,"time",t)},expression:"form2.time"}})],1),l("el-form-item",{attrs:{label:"处理说明","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.moredetail,callback:function(t){e.$set(e.form2,"moredetail",t)},expression:"form2.moredetail"}})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk()}}},[e._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"告警详情",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[l("el-form",{attrs:{"label-position":"left",model:e.form2}},[l("el-form-item",{attrs:{label:"负责人"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form2.name,callback:function(t){e.$set(e.form2,"name",t)},expression:"form2.name"}})],1),l("el-form-item",{attrs:{label:"联系方式"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form2.telephone,callback:function(t){e.$set(e.form2,"telephone",t)},expression:"form2.telephone"}})],1),l("el-form-item",{attrs:{label:"处理时间"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0,"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.form2.time,callback:function(t){e.$set(e.form2,"time",t)},expression:"form2.time"}})],1),l("el-form-item",{attrs:{label:"处理说明"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form2.moredetail,callback:function(t){e.$set(e.form2,"moredetail",t)},expression:"form2.moredetail"}})],1)],1)],1)],1)},a=[],i=l("dac6"),s={data:function(){return{tableData:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{id:"",time:"",place:"",device_id:"",area_id:"",type:"",data:"",status:""},form2:{dismissid:"",name:"",telephone:"",time:"",moredetail:""},temp:[],formLabelWidth:"120px"}},created:function(){this.GetAllData()},methods:{GetAllData:function(){var e=this,t="/warning/";i["a"].get(t,{params:{dismissid:this.form2.dismissid}}).then((function(t){console.log(t),e.tableData=t.data.data.results})).catch((function(t){console.log(t),e.$notify.error({title:"失败",message:"获取数据失败"})}))},BtnOk:function(){var e=this;console.log(this.form2.dismissid),console.log(this.form2),i["a"].post("/warning/done",this.form2).then((function(t){console.log("如果成功：",t),e.GetAllData()})).catch((function(t){e.$notify.error({title:"失败",message:"新增失败"}),console.log(t)}));var t="/warning/"+this.form2.dismissid+"/status";i["a"].put(t).then((function(t){console.log(t),e.$notify.success({title:"成功",message:"解除成功"}),e.GetAllData()})).catch((function(t){console.log(t),e.$notify.success({title:"失败",message:"解除失败"})})),this.dialogFormVisible=!1},handleCheck:function(e){var t=this;this.dialogTableVisible=!0,this.form2.dismissid=e.id,console.log("dismissid:",this.form2.dismissid);var l="/warning/detail";i["a"].get(l,{params:{dismissid:this.idd}}).then((function(e){console.log(e),t.$set(t.temp=e.data.data.results),t.$set(t.form2=t.temp[0]),console.log("form2:",t.form2)})).catch((function(e){console.log(e),t.$notify.error({title:"失败",message:"查看失败"})}))},Delete:function(e){this.form2.dismissid=e.id,console.log(this.form2.dismissid),this.dialogFormVisible=!0}}},r=s,n=l("2877"),m=Object(n["a"])(r,o,a,!1,null,"2b5d67aa",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0c5526.d50749d9.js.map