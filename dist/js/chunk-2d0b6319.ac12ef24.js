(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6319"],{"1bb4":function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"ces-main"},[l("el-row",[l("el-tag",{staticClass:"themetag"},[e._v("设备管理")]),l("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.AddTool}},[e._v("添加设备")])],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,model:e.form,border:""}},[l("el-table-column",{attrs:{prop:"device_id",label:"设备编号"}}),l("el-table-column",{attrs:{prop:"serial",label:"设备名称"}}),l("el-table-column",{attrs:{prop:"x_index",label:"经度"}}),l("el-table-column",{attrs:{prop:"y_index",label:"纬度"}}),l("el-table-column",{attrs:{prop:"bind_area",label:"绑定状态"}}),l("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.Editor(t.row)}}},[e._v("更新")]),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.Dele(t.row)}}},[e._v("删除")])]}}])})],1),l("el-dialog",{attrs:{title:e.title,visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[l("el-form",{attrs:{"label-position":"left",model:e.form}},[l("el-form-item",{attrs:{label:"发送频率"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}})],1),l("el-form-item",{attrs:{label:"报警值"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.thresholdValue,callback:function(t){e.$set(e.form,"thresholdValue",t)},expression:"form.thresholdValue"}})],1),l("el-form-item",{attrs:{label:"校准值"}},[l("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.calibrationValue,callback:function(t){e.$set(e.form,"calibrationValue",t)},expression:"form.calibrationValue"}})],1)],1)],1),l("el-dialog",{attrs:{title:"title",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"ruleForm",attrs:{"label-position":"left",model:e.form}},[l("el-form-item",{attrs:{label:"设备序列号","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.device_id,callback:function(t){e.$set(e.form,"device_id",t)},expression:"form.device_id"}})],1),l("el-form-item",{attrs:{label:"设备名称","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),l("el-form-item",{attrs:{label:"经度","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.x_index,callback:function(t){e.$set(e.form,"x_index",t)},expression:"form.x_index"}})],1),l("el-form-item",{attrs:{label:"纬度","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.y_index,callback:function(t){e.$set(e.form,"y_index",t)},expression:"form.y_index"}})],1),l("el-form-item",{attrs:{label:"发送频率","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}})],1),l("el-form-item",{attrs:{label:"报警值","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.thresholdValue,callback:function(t){e.$set(e.form,"thresholdValue",t)},expression:"form.thresholdValue"}})],1),l("el-form-item",{attrs:{label:"校准值","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.calibrationValue,callback:function(t){e.$set(e.form,"calibrationValue",t)},expression:"form.calibrationValue"}})],1),l("el-form-item",{attrs:{label:"绑定状态","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择绑定状态"},model:{value:e.form.is_bind,callback:function(t){e.$set(e.form,"is_bind",t)},expression:"form.is_bind"}},[l("el-option",{attrs:{label:"true",value:"true"}}),l("el-option",{attrs:{label:"false",value:"false"}})],1)],1),l("el-form-item",{attrs:{label:"在线状态","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择在线状态"},model:{value:e.form.is_Online,callback:function(t){e.$set(e.form,"is_Online",t)},expression:"form.is_Online"}},[l("el-option",{attrs:{label:"true",value:"true"}}),l("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},a=[],i=l("dac6"),r={data:function(){return{that:this,tableData:[],dialogFormVisible:!1,form:{device_id:"",serial:"",x_index:"",y_index:"",bind_area:"",is_Online:!0,frequency:"",thresholdValue:"",calibrationValue:""},formLabelWidth:"120px",dialogTableVisible:!1,title:"新增设备",idDis:!1}},created:function(){this.GetAllData()},methods:{GetAllData:function(){var e=this,t="/devices/device_list";i["a"].get(t).then((function(t){console.log(t),e.tableData=t.data.data.results})).catch((function(t){console.log(t),e.$notify.error({title:"失败",message:"获取数据失败"})}))},AddTool:function(){this.title="新增设备",this.dialogFormVisible=!0,this.form={}},Dele:function(e){var t=this;this.$confirm("此操作将永久删除该设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(e.device_id);var l="/devices/device_delete";i["a"].delete(l,{params:{device_id:e.device_id}}).then((function(e){console.log(e),t.$notify.success({title:"成功",message:"删除成功"}),t.GetAllData()})).catch((function(e){console.log(e),t.$notify.success({title:"失败",message:"删除失败"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},Editor:function(e){var t=this;this.title="更新设备",console.log("test showrecord2"),console.log(e.device_id),this.$axios.put("http://175.24.65.62:8900/devices/device_update?device_id="+e.device_id).then((function(e){console.log(e.data.data),t.$notify.success({title:"成功",message:"状态更新成功"}),t.GetAllData()})).catch((function(e){console.log(e),t.$notify.success({title:"失败",message:"状态更新失败"})}))},BtnOk:function(e){var t=this;this.$refs[e].validate((function(e){e?("新增设备"==t.title&&i["a"].post("/devices/device_add",t.form).then((function(e){console.log("如果成功：",e),t.GetAllData()})).catch((function(e){t.$notify.error({title:"失败",message:"新增失败"}),console.log(e)})),"更新设备"==t.title&&console.log("更新设备"),t.dialogFormVisible=!1):console.log("失败")}))}}},s=r,n=l("2877"),c=Object(n["a"])(s,o,a,!1,null,"83c1649c",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0b6319.ac12ef24.js.map