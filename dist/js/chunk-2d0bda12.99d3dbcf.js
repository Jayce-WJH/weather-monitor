(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bda12"],{"2d8b":function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"ces-main"},[l("el-row",[l("el-tag",{staticClass:"themetag"},[e._v("用户列表")]),l("div",{staticClass:"buttons",staticStyle:{float:"right"}},[l("el-button",{attrs:{type:"primary"},on:{click:e.AddUsr}},[e._v("添加用户")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.thaw()}}},[e._v("解冻操作")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[l("el-table-column",{attrs:{prop:"user_id",label:"用户工号",width:"80"}}),l("el-table-column",{attrs:{prop:"username",label:"用户名",width:"80"}}),l("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),l("el-table-column",{attrs:{prop:"telephone",label:"电话"}}),l("el-table-column",{attrs:{prop:"gender",label:"性别",width:"115"}}),l("el-table-column",{attrs:{prop:"authority",label:"角色",width:"145"}}),l("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.Editor(t.row)}}},[e._v("编辑")]),l("el-button",{attrs:{type:"text",size:"small"},on:{click:function(l){return e.Delete(t.row)}}},[e._v("冻结")])]}}])})],1),l("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.form,rules:e.rules}},[l("el-form-item",{attrs:{label:"用户工号",prop:"user_id","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}})],1),l("el-form-item",{attrs:{label:"姓名",prop:"username","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),l("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),l("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),l("el-form-item",{attrs:{label:"电话",prop:"telephone","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),l("el-form-item",{attrs:{label:"冻结状态",prop:"is_active","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择冻结状态"},model:{value:e.form.is_active,callback:function(t){e.$set(e.form,"is_active",t)},expression:"form.is_active"}},[l("el-option",{attrs:{label:"激活",value:"true"}}),l("el-option",{attrs:{label:"冻结",value:"false"}})],1)],1),l("el-form-item",{attrs:{label:"性别",prop:"gender","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[l("el-option",{attrs:{label:"男",value:"男"}}),l("el-option",{attrs:{label:"女",value:"女"}})],1)],1),l("el-form-item",{attrs:{label:"角色",prop:"authority","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择权限类型"},model:{value:e.form.authority,callback:function(t){e.$set(e.form,"authority",t)},expression:"form.authority"}},[l("el-option",{attrs:{label:"普通管理员",value:"普通管理员"}}),l("el-option",{attrs:{label:"超级管理员",value:"超级管理员"}})],1)],1)],1),l("div",{staticClass:"dialog-footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk("ruleForm")}}},[e._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:e.title,visible:e.dialogForm2Visible},on:{"update:visible":function(t){e.dialogForm2Visible=t}}},[l("el-form",{attrs:{model:e.form2,rules:e.rules}},[l("el-form-item",{attrs:{label:"用户工号",prop:"user_id","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.user_id,callback:function(t){e.$set(e.form2,"user_id",t)},expression:"form2.user_id"}})],1),l("el-form-item",{attrs:{label:"姓名",prop:"username","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.username,callback:function(t){e.$set(e.form2,"username",t)},expression:"form2.username"}})],1),l("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.email,callback:function(t){e.$set(e.form2,"email",t)},expression:"form2.email"}})],1),l("el-form-item",{attrs:{label:"电话",prop:"telephone","label-width":e.formLabelWidth}},[l("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.telephone,callback:function(t){e.$set(e.form2,"telephone",t)},expression:"form2.telephone"}})],1),l("el-form-item",{attrs:{label:"性别",prop:"gender","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form2.gender,callback:function(t){e.$set(e.form2,"gender",t)},expression:"form2.gender"}},[l("el-option",{attrs:{label:"男",value:"男"}}),l("el-option",{attrs:{label:"女",value:"女"}})],1)],1),l("el-form-item",{attrs:{label:"角色",prop:"authority","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择权限类型"},model:{value:e.form2.authority,callback:function(t){e.$set(e.form2,"authority",t)},expression:"form2.authority"}},[l("el-option",{attrs:{label:"普通管理员",value:"普通管理员"}}),l("el-option",{attrs:{label:"超级管理员",value:"超级管理员"}})],1)],1)],1),l("div",{staticClass:"dialog-footer"},[l("el-button",{on:{click:function(t){e.dialogForm2Visible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.BtnOk2()}}},[e._v("确 定")])],1)],1),l("div",{staticClass:"page",staticStyle:{position:"absolute",height:"20px",right:"20px"}},[l("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.page_size,"current-page":e.page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.handleCurrentChange}})],1)],1)},a=[],i=l("dac6"),r={data:function(){return{tableData:[],title:"新增用户",dialogFormVisible:!1,dialogForm2Visible:!1,dialogVisible:!1,form:{user_id:"",username:"",password:"",email:"",telephone:"",gender:"",authority:"",is_active:""},form2:{user_id:"",username:"",email:"",telephone:"",gender:"",authority:"",is_active:""},formLabelWidth:"100px",total:void 0,page_size:5,page:1,rules:{user_id:[{len:5,message:"长度需5个字符",trigger:"blur"}],password:[{min:6,message:"密码需大于6位",trigger:"blur"}]}}},mounted:function(){console.log("created"),this.GetAllData()},methods:{handleCurrentChange:function(e){console.log(e),this.GetAllData()},GetAllData:function(){var e=this,t="/users/";i["a"].get(t,{params:{user_id:this.user_id,page_size:this.page_size,page:this.page}}).then((function(t){console.log(t),e.tableData=t.data.data.results})).catch((function(t){console.log(t),e.$notify.error({title:"失败",message:"获取数据失败"})}))},AddUsr:function(){this.title="新增用户",this.dialogFormVisible=!0,this.form={}},BtnOk:function(){var e=this;i["a"].post("/users/",this.form).then((function(t){console.log("如果成功：",t),e.GetAllData()})).catch((function(t){e.$notify.error({title:"失败",message:"新增失败"}),console.log(t)})),this.dialogFormVisible=!1},BtnOk2:function(){var e=this,t="/users/"+this.form2.user_id+"/";i["a"].put(t,this.form2).then((function(t){console.log(t),e.$notify.success({title:"成功",message:"修改成功"}),e.GetAllData()})).catch((function(t){console.log(t),e.$notify.success({title:"失败",message:"修改失败"})})),this.dialogForm2Visible=!1},Delete:function(e){var t=this;this.$confirm("冻结后用户不再能登录管理模式，解冻需点击解冻按钮, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].delete("/users/"+e.user_id+"/").then((function(e){console.log(e),t.$notify.success({title:"成功",message:"冻结成功"}),t.GetAllData()})).catch((function(e){console.log(e),t.$notify.success({title:"失败",message:"冻结失败"})}))})).catch((function(){t.$message({type:"info",message:"已取消冻结"})}))},thaw:function(){var e=this;this.$prompt("请输入需要解冻的工号","解冻",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){console.log("value:",t.value),i["a"].patch("/users/"+t.value+"/").then((function(t){console.log(t),e.$notify.success({title:"成功",message:"解冻成功"}),e.GetAllData()})).catch((function(t){console.log(t),e.$notify.success({title:"失败",message:"解冻失败"})}))})).catch((function(){e.$message({type:"info",message:"取消解除"})}))},Editor:function(e){this.title="修改信息",this.dialogForm2Visible=!0,console.log(this.form2),this.form2=e,console.log(this.form2)}}},s=r,n=l("2877"),u=Object(n["a"])(s,o,a,!1,null,"f5f22570",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0bda12.99d3dbcf.js.map